<script>
    const nav = document.getElementById('nav');
    const content = document.getElementById('content');
  
    fetch('posts/manifest.json')
      .then(res => res.json())
      .then(posts => {
        posts.forEach(filename => {
          const link = document.createElement('a');
          link.href = "#";
          link.textContent = filename.replace('.md', '');
          link.onclick = (e) => {
            e.preventDefault();
            loadMarkdown('posts/' + filename);
          };
          nav.appendChild(link);
        });
      });
  
    function loadMarkdown(file) {
      fetch(file)
        .then(res => res.text())
        .then(md => {
          content.innerHTML = marked.parse(md);
        })
        .catch(err => {
          content.innerHTML = `<p>Error loading post: ${err.message}</p>`;
        });
    }
  </script>
  